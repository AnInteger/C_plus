## 			基于HUffman和LZ77的文件压缩

一、为什么做这个项目：

在学习了数据结构中的Huffman树之后，对Huffman编码比较敏感，了解到Huffman编码经常用于压缩，就萌生了去实现一个压缩算法的想法。最终以gzip压缩算法的大致思想实现了这个项目。

二、项目原理：

Huffman：

压缩：

1. 首先通过对文件的读取，进行信息统计。构建组织单元用来保存每一种字符的权值。
2. 以这些权值信息，通过优先级队列，从而构建Huffman树。
3. 先向新压缩文件中写入压缩文件的头部信息用于还原Huffman树
4. 通过对不同字符信息的编码从而减少其单独字符所占的字节数
5. 通过获取到的编码以位为单位写入到新的压缩文件中，从而实现压缩文件的目的

解压缩：

1. 通过在新的压缩文件中保存所有字符信息以及其权值，来还原Huffman树
2. 通过读取压缩文件的每一个字节的最高位来判断其编码对应的字符
3. 如果此时结点的左子树和右子树为空，表示此次匹配已经成功则开启下一个字符的匹配
4. 直到所有字符计数等于文件大小则证明解压缩完成

LZ77：

压缩：

1. 通过维护一个64k大小的窗口来实现其查找缓冲区和先行缓冲区的机制
2. 通过构建一个64k大小的哈希表来分别保存发生哈希冲突的字符和当前字符
3. 通过head中的值在prev对应的下标中存储发生哈希冲突的值达到映射的目的
4. 进行查找和哈希表插入时采用3个字节计算保证长度距离对小于原压缩串
5. 查找缓冲区进行查找当在先行缓冲区中发现重复字符串则向前进行查找并用长度距离对表示
6. 同时利用位图表明此时长度与原字符的区别以保证解压缩的识别
7. 滑动窗口保证每次所查询的最大范围为32k
8. 当先行缓冲区所剩数据小于临界值，为了避免上下文数据丢失，进行数据搬移
9. 同时搬移哈希表中的对应窗口，保证查询范围，知道压缩完毕

解压缩：

1.通过位图和压缩文件，如果是原字符则直接写入解压缩文件，如果不是则证明是长度距离对，同时读取3个字节获取到长度和距离

2.通过距离确定前文位置，然后依次读取长度个字符进行写入

三、项目问题

Huffman压缩

1. 如何构建一颗Huffman树？
2. 中文数据？
3. 如何获取字符编码
4. 如何还原Huffman树？
5. 解压缩Huffman树结点为空无法正常字符？

LZ77压缩

1. 查找缓冲区滑动，如何保证查找32k的范围？
2. 哈希桶大小？
3. 1个字节如何存储258的最大长度
4. 滑动窗口中数据不够怎么办？那么哈希表中数据怎么办？
5. 哈希表的空间多大？
6. 中文数据？
7. 搬移条件，填充问题
8. 解压缩长度距离对，需要刷新缓冲区

项目测试：

![image-20200309172902433](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20200309172902433.png)

效率问题：

解决方案：

四、项目扩展：